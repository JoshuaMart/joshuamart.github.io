---
import { Icon } from 'astro-icon/components';
import { siteConfig, socialLinks, navLinks } from '../data/site';

interface Props {
  currentPath?: string;
}

const { currentPath = '/' } = Astro.props;

// Normalize path for comparison (remove trailing slash except for root)
const normalizePath = (path: string) => path === '/' ? '/' : path.replace(/\/$/, '');
---

<header class="fixed top-0 left-0 right-0 z-50 border-b border-border bg-background/80 backdrop-blur-md">
  <nav class="mx-auto flex h-16 max-w-6xl items-center justify-between px-4 sm:px-6">
    <!-- Logo -->
    <a href="/" class="flex items-center gap-2 font-mono text-lg font-semibold text-text-main transition-colors hover:text-accent">
      <span class="flex h-8 w-8 items-center justify-center rounded bg-accent text-background font-bold text-sm">{siteConfig.initials}</span>
      <span class="hidden sm:inline">{siteConfig.shortName}</span>
    </a>

    <!-- Navigation Links -->
    <ul class="flex items-center gap-1 sm:gap-2">
      {navLinks.map((link) => (
        <li>
          <a
            href={link.href}
            class:list={[
              'px-3 py-2 text-sm font-medium transition-colors rounded-md',
              normalizePath(currentPath) === normalizePath(link.href)
                ? 'text-accent'
                : 'text-text-muted hover:text-text-main hover:bg-surface'
            ]}
          >
            {link.label}
          </a>
        </li>
      ))}
    </ul>

    <!-- Social Links -->
    <div class="flex items-center gap-1">
      {socialLinks.map((link) => (
        <a
          href={link.href}
          target="_blank"
          rel="noopener noreferrer"
          class="flex h-9 w-9 items-center justify-center rounded-md text-text-muted transition-colors hover:bg-surface hover:text-text-main"
          aria-label={link.name}
        >
          <Icon name={link.icon} class="h-5 w-5" />
        </a>
      ))}
    </div>
  </nav>
</header>
